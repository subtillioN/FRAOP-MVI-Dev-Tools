import{EventEmitter as t}from"events";import e from"react";import{ResponsiveContainer as r,LineChart as o,CartesianGrid as n,XAxis as i,YAxis as a,Tooltip as s,Line as c}from"recharts";import"d3";import{Tooltip as l,IconButton as p}from"@mui/material";import m from"@mui/icons-material/Settings";var u=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.analyze=function(){return{components:[],unusedProps:[],propPatterns:[],frequentUpdates:[]}},t}(),h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},h(t,e)};var f=function(){return f=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},f.apply(this,arguments)};function g(t,e,r){if(r||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var d=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;return r.isMonitoring=!1,r.metrics={latencies:[],errors:0,totalRequests:0,timestamps:[]},r.sampleInterval=e.sampleInterval||1e3,r.warningThreshold=e.warningThreshold||1e3,r.errorThreshold=e.errorThreshold||5e3,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.start=function(){this.isMonitoring||(this.isMonitoring=!0,this.emit("monitoring:started"),this.startMonitoring())},e.prototype.stop=function(){this.isMonitoring&&(this.isMonitoring=!1,this.emit("monitoring:stopped"))},e.prototype.startMonitoring=function(){var t=this,e=function(){if(t.isMonitoring){var r=Date.now(),o=t.collectPerformanceMetrics();t.metrics=f(f({},o),{timestamps:g(g([],t.metrics.timestamps,!0),[r],!1)}),t.emit("metrics:collected",t.metrics),t.checkViolations(t.metrics),setTimeout(e,t.sampleInterval)}};e()},e.prototype.collectPerformanceMetrics=function(){var t=this,e=performance.getEntriesByType("measure"),r=e.map((function(t){return t.duration})),o=e.filter((function(e){return e.duration>t.errorThreshold})).length,n=e.length;return{latencies:r,errors:o,totalRequests:n,timestamps:this.metrics.timestamps,averageLatency:r.reduce((function(t,e){return t+e}),0)/r.length,errorRate:o/n,throughput:n/(this.sampleInterval/1e3)}},e.prototype.checkViolations=function(t){var e=t.averageLatency||0;e>this.errorThreshold?this.emit("monitoring:violation",{type:"error",message:"Average latency (".concat(e,"ms) exceeds error threshold (").concat(this.errorThreshold,"ms)")}):e>this.warningThreshold&&this.emit("monitoring:violation",{type:"warning",message:"Average latency (".concat(e,"ms) exceeds warning threshold (").concat(this.warningThreshold,"ms)")})},e}(t),y=function(t){var l=t.data.components.flatMap((function(t){return t.props.map((function(e){return{name:"".concat(t.componentName,".").concat(e.name),time:e.timestamps[e.timestamps.length-1]||0,value:e.lastValue,updates:e.valueChanges||0}}))}));return e.createElement("div",{style:{width:"100%",height:400}},e.createElement(r,null,e.createElement(o,{data:l},e.createElement(n,{strokeDasharray:"3 3"}),e.createElement(i,{dataKey:"time"}),e.createElement(a,null),e.createElement(s,null),e.createElement(c,{type:"monotone",dataKey:"updates",stroke:"#8884d8"}))))};function v(t){var r=t.onClick,o=t.tooltipPlacement,n=void 0===o?"bottom":o,i=t.tooltipTitle,a=void 0===i?"Developer Tools - Task & Feature Analysis":i;return e.createElement(l,{title:a,arrow:!0,placement:n},e.createElement(p,{"aria-label":"Developer Tools",color:"primary",onClick:r,sx:{backgroundColor:"rgba(0, 0, 0, 0.4)","&:hover":{backgroundColor:"rgba(59, 130, 246, 0.2)",boxShadow:"0 0 12px rgba(59, 130, 246, 0.3)"},boxShadow:"0 0 8px rgba(59, 130, 246, 0.2)"}},e.createElement(m,null)))}export{v as DevToolsButton,d as MonitoringService,u as PropAnalyzer,y as PropTimeline};
//# sourceMappingURL=index.esm.js.map
