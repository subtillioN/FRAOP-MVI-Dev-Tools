"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("events"),t=require("react"),r=require("recharts"),a=require("d3"),n=require("@mui/material"),o=require("@mui/icons-material/Settings");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var i=s(t),c=l(a),u=s(o);class m{constructor(){}static getInstance(){return m.instance||(m.instance=new m),m.instance}analyze(){return{components:[],unusedProps:[],propPatterns:[],frequentUpdates:[]}}}class d extends e.EventEmitter{constructor(e={}){super(),this.isMonitoring=!1,this.metrics={latencies:[],errors:0,totalRequests:0,timestamps:[]},this.sampleInterval=e.sampleInterval||1e3,this.warningThreshold=e.warningThreshold||1e3,this.errorThreshold=e.errorThreshold||5e3}static getInstance(e={}){return d.instance||(d.instance=new d(e)),d.instance}start(){this.isMonitoring||(this.isMonitoring=!0,this.emit("monitoring:started"),this.startMonitoring())}stop(){this.isMonitoring&&(this.isMonitoring=!1,this.emit("monitoring:stopped"))}startMonitoring(){const e=()=>{if(!this.isMonitoring)return;const t=Date.now(),r=this.collectPerformanceMetrics();this.metrics=Object.assign(Object.assign({},r),{timestamps:[...this.metrics.timestamps,t]}),this.emit("metrics:collected",this.metrics),this.checkViolations(this.metrics),setTimeout(e,this.sampleInterval)};e()}collectPerformanceMetrics(){const e=performance.getEntriesByType("measure"),t=e.map((e=>e.duration)),r=e.filter((e=>e.duration>this.errorThreshold)).length,a=e.length;return{latencies:t,errors:r,totalRequests:a,timestamps:this.metrics.timestamps,averageLatency:t.reduce(((e,t)=>e+t),0)/t.length,errorRate:r/a,throughput:a/(this.sampleInterval/1e3)}}checkViolations(e){const t=e.averageLatency||0;t>this.errorThreshold?this.emit("monitoring:violation",{type:"error",message:`Average latency (${t}ms) exceeds error threshold (${this.errorThreshold}ms)`}):t>this.warningThreshold&&this.emit("monitoring:violation",{type:"warning",message:`Average latency (${t}ms) exceeds warning threshold (${this.warningThreshold}ms)`})}}var p={container:"base-module_container__N-VTj","node-component":"base-module_node-component__3R2-B","node-prop":"base-module_node-prop__6bpoO","link-dependency":"base-module_link-dependency__t58B6","link-update":"base-module_link-update__fj1Pw",chartContainer:"base-module_chartContainer__lcs0d",tooltip:"base-module_tooltip__c9I89",performanceHigh:"base-module_performanceHigh__Hnxwi",performanceMedium:"base-module_performanceMedium__jYlB7",performanceLow:"base-module_performanceLow__RWfP-",section:"base-module_section__l0hua","section-title":"base-module_section-title__GYBoP","section-content":"base-module_section-content__s8HOk",button:"base-module_button__yooH5",buttonActive:"base-module_buttonActive__yBKXk",dataGrid:"base-module_dataGrid__cMCBW",dataItem:"base-module_dataItem__S-ukG",dataLabel:"base-module_dataLabel__-otSE",dataValue:"base-module_dataValue__wYuSW"};exports.ComponentRelationship=({data:e})=>{const r=t.useRef(null),a=t.useRef(),n=t.useCallback((()=>{r.current&&a.current&&c.select(r.current).transition().duration(750).call(a.current.transform,c.zoomIdentity)}),[]);return t.useEffect((()=>{if(!r.current)return;c.select(r.current).selectAll("*").remove();const t=e.components.map((e=>({id:e.componentName,group:1}))),n=e.propPatterns.flatMap((e=>"dependent"!==e.type?[]:e.components.flatMap((t=>e.components.filter((e=>e!==t)).map((e=>({source:t,target:e,value:1}))))))),o=c.select(r.current).attr("width",800).attr("height",600),s=c.zoom().scaleExtent([.1,4]).on("zoom",(e=>{o.selectAll("g").attr("transform",e.transform.toString())}));a.current=s,o.call(s);const l=c.forceSimulation(t).force("link",c.forceLink(n).id((e=>e.id))).force("charge",c.forceManyBody()).force("center",c.forceCenter(400,300)),i=o.append("g").selectAll("line").data(n).join("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",(e=>Math.sqrt(e.value))),u=o.append("g").selectAll("circle").data(t).join("circle").attr("r",5).attr("fill","#69b3a2").call(c.drag().on("start",(function(e){e.active||l.alphaTarget(.3).restart();e.subject.fx=e.subject.x,e.subject.fy=e.subject.y})).on("drag",(function(e){e.subject.fx=e.x,e.subject.fy=e.y})).on("end",(function(e){e.active||l.alphaTarget(0);e.subject.fx=null,e.subject.fy=null})));return u.append("title").text((e=>e.id)),l.on("tick",(()=>{i.attr("x1",(e=>{var t;return null!==(t=e.source.x)&&void 0!==t?t:0})).attr("y1",(e=>{var t;return null!==(t=e.source.y)&&void 0!==t?t:0})).attr("x2",(e=>{var t;return null!==(t=e.target.x)&&void 0!==t?t:0})).attr("y2",(e=>{var t;return null!==(t=e.target.y)&&void 0!==t?t:0})),u.attr("cx",(e=>{var t;return null!==(t=e.x)&&void 0!==t?t:0})).attr("cy",(e=>{var t;return null!==(t=e.y)&&void 0!==t?t:0}))})),()=>{l.stop()}}),[e]),i.default.createElement("div",{className:p["component-relationship"]},i.default.createElement("h3",null,"Component Relationships"),i.default.createElement("div",{className:p["relationship-controls"]},i.default.createElement("button",{className:p.button,onClick:n},"Reset View")),i.default.createElement("div",{className:p["relationship-legend"]},i.default.createElement("div",{className:p["legend-item"]},i.default.createElement("span",{className:p["legend-color"],style:{backgroundColor:"#4caf50"}}),i.default.createElement("span",null,"Component")),i.default.createElement("div",{className:p["legend-item"]},i.default.createElement("span",{className:p["legend-color"],style:{backgroundColor:"#2196f3"}}),i.default.createElement("span",null,"Prop"))),i.default.createElement("svg",{ref:r,width:800,height:600,className:p["relationship-svg"]}))},exports.DevToolsButton=function({onClick:e,tooltipPlacement:t="bottom",tooltipTitle:r="Developer Tools - Task & Feature Analysis"}){return i.default.createElement(n.Tooltip,{title:r,arrow:!0,placement:t},i.default.createElement(n.IconButton,{"aria-label":"Developer Tools",color:"primary",onClick:e,sx:{backgroundColor:"rgba(0, 0, 0, 0.4)","&:hover":{backgroundColor:"rgba(59, 130, 246, 0.2)",boxShadow:"0 0 12px rgba(59, 130, 246, 0.3)"},boxShadow:"0 0 8px rgba(59, 130, 246, 0.2)"}},i.default.createElement(u.default,null)))},exports.MonitoringService=d,exports.PropAnalyzer=m,exports.PropTimeline=({data:e})=>{const t=e.components.flatMap((e=>e.props.map((t=>({name:`${e.componentName}.${t.name}`,time:t.timestamps[t.timestamps.length-1]||0,value:t.lastValue,updates:t.valueChanges||0})))));return i.default.createElement("div",{style:{width:"100%",height:400}},i.default.createElement(r.ResponsiveContainer,null,i.default.createElement(r.LineChart,{data:t},i.default.createElement(r.CartesianGrid,{strokeDasharray:"3 3"}),i.default.createElement(r.XAxis,{dataKey:"time"}),i.default.createElement(r.YAxis,null),i.default.createElement(r.Tooltip,null),i.default.createElement(r.Line,{type:"monotone",dataKey:"updates",stroke:"#8884d8"}))))};
//# sourceMappingURL=index.js.map
