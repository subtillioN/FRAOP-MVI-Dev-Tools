"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("events"),t=require("react"),r=require("recharts");require("d3");var n=require("@mui/material"),o=require("@mui/icons-material/Settings");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=i(t),s=i(o),l=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.analyze=function(){return{components:[],unusedProps:[],propPatterns:[],frequentUpdates:[]}},e}(),c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},c(e,t)};var u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)};function p(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var m=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.isMonitoring=!1,r.metrics={latencies:[],errors:0,totalRequests:0,timestamps:[]},r.sampleInterval=t.sampleInterval||1e3,r.warningThreshold=t.warningThreshold||1e3,r.errorThreshold=t.errorThreshold||5e3,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.start=function(){this.isMonitoring||(this.isMonitoring=!0,this.emit("monitoring:started"),this.startMonitoring())},t.prototype.stop=function(){this.isMonitoring&&(this.isMonitoring=!1,this.emit("monitoring:stopped"))},t.prototype.startMonitoring=function(){var e=this,t=function(){if(e.isMonitoring){var r=Date.now(),n=e.collectPerformanceMetrics();e.metrics=u(u({},n),{timestamps:p(p([],e.metrics.timestamps,!0),[r],!1)}),e.emit("metrics:collected",e.metrics),e.checkViolations(e.metrics),setTimeout(t,e.sampleInterval)}};t()},t.prototype.collectPerformanceMetrics=function(){var e=this,t=performance.getEntriesByType("measure"),r=t.map((function(e){return e.duration})),n=t.filter((function(t){return t.duration>e.errorThreshold})).length,o=t.length;return{latencies:r,errors:n,totalRequests:o,timestamps:this.metrics.timestamps,averageLatency:r.reduce((function(e,t){return e+t}),0)/r.length,errorRate:n/o,throughput:o/(this.sampleInterval/1e3)}},t.prototype.checkViolations=function(e){var t=e.averageLatency||0;t>this.errorThreshold?this.emit("monitoring:violation",{type:"error",message:"Average latency (".concat(t,"ms) exceeds error threshold (").concat(this.errorThreshold,"ms)")}):t>this.warningThreshold&&this.emit("monitoring:violation",{type:"warning",message:"Average latency (".concat(t,"ms) exceeds warning threshold (").concat(this.warningThreshold,"ms)")})},t}(e.EventEmitter);exports.DevToolsButton=function(e){var t=e.onClick,r=e.tooltipPlacement,o=void 0===r?"bottom":r,i=e.tooltipTitle,l=void 0===i?"Developer Tools - Task & Feature Analysis":i;return a.default.createElement(n.Tooltip,{title:l,arrow:!0,placement:o},a.default.createElement(n.IconButton,{"aria-label":"Developer Tools",color:"primary",onClick:t,sx:{backgroundColor:"rgba(0, 0, 0, 0.4)","&:hover":{backgroundColor:"rgba(59, 130, 246, 0.2)",boxShadow:"0 0 12px rgba(59, 130, 246, 0.3)"},boxShadow:"0 0 8px rgba(59, 130, 246, 0.2)"}},a.default.createElement(s.default,null)))},exports.MonitoringService=m,exports.PropAnalyzer=l,exports.PropTimeline=function(e){var t=e.data.components.flatMap((function(e){return e.props.map((function(t){return{name:"".concat(e.componentName,".").concat(t.name),time:t.timestamps[t.timestamps.length-1]||0,value:t.lastValue,updates:t.valueChanges||0}}))}));return a.default.createElement("div",{style:{width:"100%",height:400}},a.default.createElement(r.ResponsiveContainer,null,a.default.createElement(r.LineChart,{data:t},a.default.createElement(r.CartesianGrid,{strokeDasharray:"3 3"}),a.default.createElement(r.XAxis,{dataKey:"time"}),a.default.createElement(r.YAxis,null),a.default.createElement(r.Tooltip,null),a.default.createElement(r.Line,{type:"monotone",dataKey:"updates",stroke:"#8884d8"}))))};
//# sourceMappingURL=index.js.map
